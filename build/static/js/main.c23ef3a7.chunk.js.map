{"version":3,"sources":["components/Person.js","components/Filter.js","components/PersonForm.js","components/Noti.js","services/persons.js","App.js","index.js"],"names":["Person","name","number","remove","onClick","Filter","filter","handleFilterChange","value","onChange","PersonForm","handleSubmit","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Noti","noti","message","className","err","baseUrl","axios","get","then","res","data","person","post","put","id","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","error","setNoti","useEffect","personService","initialPersons","filteredNames","p","toLocaleLowerCase","includes","e","target","preventDefault","map","window","confirm","personToUpdate","find","updatedPerson","returnedPerson","catch","setTimeout","concat","response","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c23ef3a7.chunk.js","sourcesContent":["const Person = ({ name, number, remove }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\t{name} {number}\r\n\t\t\t\t<button onClick={remove}>remove</button>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Person\r\n","const Filter = ({ filter, handleFilterChange }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tFilter: <input value={filter} onChange={handleFilterChange} />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Filter\r\n","const PersonForm = ({\r\n\thandleSubmit,\r\n\tnewName,\r\n\thandleNameChange,\r\n\tnewNumber,\r\n\thandleNumberChange,\r\n}) => {\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t<div>\r\n\t\t\t\tname: <input value={newName} onChange={handleNameChange} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\tnumber: <input value={newNumber} onChange={handleNumberChange} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<button type='submit'>add</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default PersonForm\r\n","const Noti = ({ noti }) => {\r\n\tif (noti?.message === null) {\r\n\t\treturn null\r\n\t}\r\n\treturn <div className={noti?.err ? 'error' : 'noti'}>{noti?.message}</div>\r\n}\r\n\r\nexport default Noti\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n\tconst request = axios.get(baseUrl)\r\n\treturn request.then(res => res.data)\r\n}\r\n\r\nconst create = person => {\r\n\tconst request = axios.post(baseUrl, person)\r\n\treturn request.then(res => res.data)\r\n}\r\n\r\nconst update = person => {\r\n\tconst request = axios.put(`${baseUrl}/${person.id}`, person)\r\n\treturn request.then(res => res.data)\r\n}\r\n\r\nconst remove = id => {\r\n\tconst request = axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, remove }\r\n","import { useState, useEffect } from 'react'\nimport Person from './components/Person'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Noti from './components/Noti'\nimport personService from './services/persons'\n\nconst App = () => {\n\tconst [persons, setPersons] = useState([])\n\tconst [newName, setNewName] = useState('')\n\tconst [newNumber, setNewNumber] = useState('')\n\tconst [filter, setFilter] = useState('')\n\tconst [noti, setNoti] = useState({ message: null, error: false })\n\n\tuseEffect(() => {\n\t\tpersonService.getAll().then(initialPersons => setPersons(initialPersons))\n\t}, [])\n\n\tconst handleNameChange = e => {\n\t\tsetNewName(e.target.value)\n\t}\n\n\tconst handleNumberChange = e => {\n\t\tsetNewNumber(e.target.value)\n\t}\n\n\tconst handleFilterChange = e => {\n\t\tsetFilter(e.target.value)\n\t}\n\n\tconst handleSubmit = e => {\n\t\te.preventDefault()\n\n\t\tconst names = persons.map(p => p.name)\n\n\t\tif (names.includes(newName)) {\n\t\t\tconst result = window.confirm(\n\t\t\t\t`${newName} is already added to phonebook, replace with a new number?`\n\t\t\t)\n\t\t\tif (result) {\n\t\t\t\tconst personToUpdate = persons.find(p => p.name === newName)\n\t\t\t\tconst updatedPerson = {\n\t\t\t\t\t...personToUpdate,\n\t\t\t\t\tnumber: newNumber,\n\t\t\t\t}\n\n\t\t\t\tpersonService\n\t\t\t\t\t.update(updatedPerson)\n\t\t\t\t\t.then(returnedPerson =>\n\t\t\t\t\t\tsetPersons(\n\t\t\t\t\t\t\tpersons.map(p =>\n\t\t\t\t\t\t\t\tp.id !== returnedPerson.id ? p : returnedPerson\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tsetNoti({\n\t\t\t\t\t\t\tmessage: `${newName}'s information has already been removed from server`,\n\t\t\t\t\t\t\terr: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetNoti({ message: null, err: false })\n\t\t\t\t\t\t}, 3000)\n\t\t\t\t\t\tsetPersons(persons.filter(p => p.id !== personToUpdate.id))\n\t\t\t\t\t})\n\n\t\t\t\tsetNewName('')\n\t\t\t\tsetNewNumber('')\n\t\t\t} else {\n\t\t\t\tsetNewName('')\n\t\t\t\tsetNewNumber('')\n\t\t\t}\n\t\t} else {\n\t\t\tconst personObj = {\n\t\t\t\tname: newName,\n\t\t\t\tnumber: newNumber,\n\t\t\t}\n\n\t\t\tpersonService\n\t\t\t\t.create(personObj)\n\t\t\t\t.then(returnedPerson => {\n\t\t\t\t\tsetPersons(persons.concat(returnedPerson))\n\t\t\t\t\tsetNewName('')\n\t\t\t\t\tsetNewNumber('')\n\t\t\t\t\tsetNoti({ ...noti, message: `Added ${newName}` })\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetNoti({ message: null, err: false })\n\t\t\t\t\t}, 3000)\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tsetNoti({ message: err.response.data.error, err: true })\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetNoti({ message: null, err: false })\n\t\t\t\t\t}, 3000)\n\t\t\t\t\tsetNewName('')\n\t\t\t\t\tsetNewNumber('')\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst handleRemove = person => {\n\t\tconst result = window.confirm(`Remove ${person.name} ?`)\n\t\tif (result) {\n\t\t\tpersonService.remove(person.id)\n\t\t\tsetPersons(persons.filter(p => p.id !== person.id))\n\t\t\tsetNoti({ ...noti, message: `Removed ${person.name}` })\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetNoti({ message: null, err: false })\n\t\t\t}, 3000)\n\t\t}\n\t}\n\n\tconst filteredNames = persons.filter(p =>\n\t\tp.name.toLocaleLowerCase().includes(filter.toLocaleLowerCase())\n\t)\n\n\treturn (\n\t\t<div>\n\t\t\t<h2>Phonebook</h2>\n\n\t\t\t<Noti noti={noti} />\n\n\t\t\t<Filter filter={filter} handleFilterChange={handleFilterChange} />\n\n\t\t\t<h3>Add a new</h3>\n\n\t\t\t<PersonForm\n\t\t\t\thandleSubmit={handleSubmit}\n\t\t\t\tnewName={newName}\n\t\t\t\thandleNameChange={handleNameChange}\n\t\t\t\tnewNumber={newNumber}\n\t\t\t\thandleNumberChange={handleNumberChange}\n\t\t\t/>\n\n\t\t\t<h2>Numbers</h2>\n\n\t\t\t{!filteredNames.length && <h4>No result!</h4>}\n\t\t\t{filteredNames.map(p => (\n\t\t\t\t<Person\n\t\t\t\t\tkey={p.name}\n\t\t\t\t\tname={p.name}\n\t\t\t\t\tnumber={p.number}\n\t\t\t\t\tremove={() => handleRemove(p)}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t)\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}